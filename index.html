async function sendPrompt() {
      const nombre = document.getElementById("restaurante").value;
      const resultDiv = document.getElementById("result");

      if (!nombre.trim()) {
        alert("Por favor escribe un nombre.");
        return;
      }

      resultDiv.innerHTML = '<div class="loading-spinner"></div><p style="text-align:center">Analizando opiniones reales...</p>';

      try {
        const response = await fetch("/api/review", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ nombre })
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.message || "Error desconocido en la API");
        }

        const fullText = data.reply || "";

        let sentimentClass = "";
        let emoji = "";
        
        // Detecci√≥n flexible de sentimiento
        const upperText = fullText.toUpperCase();
        if (upperText.includes("POSITIVO")) {
          sentimentClass = "positivo"; emoji = "üòä";
        } else if (upperText.includes("NEGATIVO")) {
          sentimentClass = "negativo"; emoji = "üòû";
        } else if (upperText.includes("NEUTRAL")) {
          sentimentClass = "neutral"; emoji = "üòê";
        }

        const lines = fullText.split('\n');
        const firstLine = lines.shift(); 
        const restOfText = lines.join('\n');

        resultDiv.innerHTML = `
          <div class="sentiment-line ${sentimentClass}">
            <span class="sentiment-emoji">${emoji}</span>
            <span>${firstLine}</span>
          </div>
          <div class="review-body">${restOfText}</div>
        `;

      } catch (error) {
        console.error("Error capturado:", error);
        resultDiv.innerHTML = `
          <div style="color:#c53030; padding:15px; background:#fff5f5; border-radius:10px; border:1px solid #feb2b2;">
            <strong>‚ö†Ô∏è Error:</strong> ${error.message}<br>
            <small>Verifica tu API Key en el archivo .env o la conexi√≥n al servidor.</small>
          </div>`;
      }
    }
